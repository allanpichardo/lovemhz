(this.webpackJsonpwebsynth=this.webpackJsonpwebsynth||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},20:function(e,t,a){e.exports=a.p+"static/media/logo.222f4c02.svg"},22:function(e,t,a){e.exports=a(41)},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(18),c=a.n(s),o=(a(27),a(3)),l=a(4),r=a(6),h=a(5),d=a(1),u=a(7),p=(a(13),a(8),a(2)),f=a.n(p),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={isStarted:!1},a.handlePlayClicked=a.handlePlayClicked.bind(Object(d.a)(a)),a.handleStopClicked=a.handleStopClicked.bind(Object(d.a)(a)),a.toggleButtonState=a.toggleButtonState.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("a",{id:"playButton",href:"#",className:"transportButton playButton",onClick:this.handlePlayClicked},i.a.createElement("i",{id:"playButtonIcon",className:"fa fa-play"})),i.a.createElement("a",{id:"stopButton",href:"#",className:"transportButton stopButton",onClick:this.handleStopClicked},i.a.createElement("i",{id:"stopButtonIcon",className:"fa fa-stop"})))}},{key:"handlePlayClicked",value:function(){var e=!this.state.isStarted;this.toggleButtonState(e);var t={isStarted:e};this.setState(t),this.props.onTransportToggle(e)}},{key:"handleStopClicked",value:function(){this.toggleButtonState(!1);var e={isStarted:!1};this.setState(e),this.props.onTransportToggle(!1),this.props.onStop()}},{key:"toggleButtonState",value:function(e){f()("#playButton").toggleClass("playButton",!e),f()("#playButton").toggleClass("pauseButton",e),f()("#playButtonIcon").toggleClass("fa-play",!e),f()("#playButtonIcon").toggleClass("fa-pause",e)}}]),t}(n.Component),m=a(10),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state=a.getInitialState(),a.leftClicked=a.leftClicked.bind(Object(d.a)(a)),a.rightClicked=a.rightClicked.bind(Object(d.a)(a)),a.hasItems=a.hasItems.bind(Object(d.a)(a)),a.canStepLeft=a.canStepLeft.bind(Object(d.a)(a)),a.canStepRight=a.canStepRight.bind(Object(d.a)(a)),a.getInitialState=a.getInitialState.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getInitialState",value:function(){var e=this.props.default,t=0;return this.props.items&&(t=this.props.items.indexOf(e)),{value:e,itemIndex:t,items:this.props.items}}},{key:"componentWillReceiveProps",value:function(e){if(e.default!==this.props.default&&(this.setState({value:e.default}),this.hasItems())){var t=this.props.items.indexOf(e.default);this.setState({itemIndex:t})}}},{key:"hasItems",value:function(){return!!this.state.items}},{key:"leftClicked",value:function(e){if(e&&e.preventDefault(),this.hasItems()){if(this.canStepLeft()){var t=this.state.itemIndex-1,a=this.state.items[t];this.input.value=a,this.setState({itemIndex:t,value:a}),e&&this.props.onChange(a)}}else if(this.canStepLeft()){var n=parseInt(this.state.value);n-=1,this.input.value=n,this.setState({value:n}),e&&this.props.onChange(n)}}},{key:"rightClicked",value:function(e){if(e&&e.preventDefault(),this.hasItems()){if(this.canStepRight()){var t=this.state.itemIndex+1,a=this.state.items[t];this.input.value=a,this.setState({itemIndex:t,value:a}),e&&this.props.onChange(a)}}else if(this.canStepRight()){var n=parseInt(this.state.value);n+=1,this.input.value=n,this.setState({value:n}),e&&this.props.onChange(n)}}},{key:"render",value:function(){var e=this,t=this.canStepLeft()?"stepButton":"stepButton stepButton_disabled",a=this.canStepRight()?"stepButton":"stepButton stepButton_disabled";return i.a.createElement("div",{className:"stepper"},i.a.createElement("a",{href:"#",onClick:function(t){e.leftClicked(t)}},i.a.createElement("svg",{className:"",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.38 33.62"},i.a.createElement("g",{id:"Layer_2"},i.a.createElement("g",{id:"appbar"},i.a.createElement("g",{id:"Transport"},i.a.createElement("g",{id:"Tempo_Stepper"},i.a.createElement("path",{id:"leftStep",className:t,d:"M.5,17.68,27.88,33.48a1,1,0,0,0,1.5-.87V1a1,1,0,0,0-1.5-.87L.5,15.94A1,1,0,0,0,.5,17.68Z"}))))))),i.a.createElement("input",{className:"stepInput",value:this.state.value,ref:function(t){return e.input=t},readOnly:!0}),i.a.createElement("a",{href:"#",onMouseDown:this.onDown,onMouseUp:this.onUp,onClick:function(t){e.rightClicked(t)}},i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.38 33.62"},i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("g",null,i.a.createElement("path",{id:"rightStep",className:a,d:"M28.88,17.68,1.5,33.48A1,1,0,0,1,0,32.62V1A1,1,0,0,1,1.5.14L28.88,15.94A1,1,0,0,1,28.88,17.68Z"}))))))))}},{key:"canStepRight",value:function(){return this.hasItems()?this.state.itemIndex<this.state.items.length-1:parseInt(this.state.value)<parseInt(this.props.max)}},{key:"canStepLeft",value:function(){return this.hasItems()?this.state.itemIndex>0:parseInt(this.state.value)>parseInt(this.props.min)}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).handleTransportToggle=function(e){var n=t.bpmToMs(a.state.bpm);if(e){var i=m.b((function(){a.handleTick()}),n);a.setState({intervalId:i})}else null!==a.state.intervalId&&(m.a(a.state.intervalId),a.setState({intervalId:null}));a.setState({isRunning:!0}),a.handleRunningChange(!0)},a.state={intervalId:null,isRunning:!1,step:0,bpm:180,steps:a.props.steps?a.props.steps:16},a.handleTick=a.handleTick.bind(Object(d.a)(a)),a.handleStop=a.handleStop.bind(Object(d.a)(a)),a.incrementStep=a.incrementStep.bind(Object(d.a)(a)),a.handleRunningChange=a.handleRunningChange.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"transport"},i.a.createElement(g,{onTransportToggle:this.handleTransportToggle,onStop:this.handleStop}),i.a.createElement("div",{className:"tempoBox"},i.a.createElement("span",null,"Tempo"),i.a.createElement(v,{default:this.state.bpm,min:1,max:620,onChange:function(t){e.handleTempoChange(t)}})))}},{key:"handleTempoChange",value:function(e){var a=this;this.setState({bpm:e});var n=t.bpmToMs(e);if(this.state.intervalId){m.a(this.state.intervalId);var i=m.b((function(){a.handleTick()}),n);this.setState({intervalId:i})}}},{key:"handleStop",value:function(){this.handleTransportToggle(!1),this.handleRunningChange(!1),this.setState({isRunning:!1,step:0})}},{key:"handleRunningChange",value:function(e){this.props.onRunningChanged(e)}},{key:"handleTick",value:function(){this.props.onTick&&this.props.onTick(this.state.step),this.incrementStep()}},{key:"incrementStep",value:function(){var e={step:(this.state.step+1)%this.state.steps};this.setState(e)}}],[{key:"bpmToMs",value:function(e){return 6e4/e/2}},{key:"msToBpm",value:function(e){return 6e4/e}},{key:"bpmToS",value:function(e){return t.bpmToMs(e)/1e3}}]),t}(n.Component),k=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"textNoteToFrequency",value:function(t){switch(t){case"C":return e.C0;case"C#":return e.noteToFrequency(1);case"D":return e.noteToFrequency(2);case"D#":return e.noteToFrequency(3);case"E":return e.noteToFrequency(4);case"F":return e.noteToFrequency(5);case"F#":return e.noteToFrequency(6);case"G":return e.noteToFrequency(7);case"G#":return e.noteToFrequency(8);case"A":return e.noteToFrequency(9);case"A#":return e.noteToFrequency(10);case"B":return e.noteToFrequency(11)}}},{key:"noteToFrequency",value:function(t){return e.C0*Math.pow(e.A,t)}},{key:"shiftToOctave",value:function(e,t){for(var a=0;a<t;++a)e*=2;return e}},{key:"C0",get:function(){return 16.35}},{key:"A",get:function(){return 1.059463094359}}]),e}(),b=(a(14),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={},a.getRing=a.getRing.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getRing",value:function(e){var t=this;switch(e){case"1":return i.a.createElement("g",null,i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-1",className:"oddRing",d:"M319.9,187.9l-19.2,46.2c10.4,4.9,18.8,13.4,23.8,23.8l46.2-19.2C360.7,216.1,342.5,197.9,319.9,187.9z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-2",className:"oddRing",d:"M372.7,243.4l-46.2,19.2c1.9,5.2,2.9,10.9,2.9,16.8s-1,11.5-2.9,16.8l46.2,19.2c4.3-11.2,6.7-23.3,6.7-36 S377,254.5,372.7,243.4z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-4",className:"oddRing",d:"M296.1,326.4c-5.2,1.9-10.9,2.9-16.8,2.9c-5.9,0-11.6-1-16.8-2.9l-19.2,46.2c11.2,4.3,23.3,6.7,36,6.7 c12.7,0,24.8-2.4,35.9-6.7L296.1,326.4z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-7",className:"oddRing",d:"M238.7,187.9c-22.6,10-40.8,28.2-50.8,50.8l46.2,19.2c4.9-10.4,13.4-18.8,23.8-23.8L238.7,187.9z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-6",className:"oddRing",d:"M186,243.4c-4.3,11.2-6.7,23.3-6.7,36s2.4,24.8,6.7,36l46.2-19.1c-1.9-5.2-2.9-10.9-2.9-16.8 s1-11.6,2.9-16.8L186,243.4z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-5",className:"oddRing",d:"M234.1,300.8l-46.2,19.2c10,22.6,28.2,40.8,50.8,50.8l19.1-46.2C247.5,319.6,239.1,311.1,234.1,300.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-3",className:"oddRing",d:"M324.5,300.8c-4.9,10.4-13.4,18.8-23.8,23.8l19.1,46.2c22.6-10,40.8-28.2,50.9-50.8L324.5,300.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"0-0",className:"oddRing",d:"M279.3,179.3c-12.7,0-24.8,2.4-36,6.7l19.1,46.2c5.2-1.9,10.9-2.9,16.8-2.9c5.9,0,11.5,1,16.8,2.9l19.1-46.2 C304.1,181.7,292,179.3,279.3,179.3z"}));case"2":return i.a.createElement("g",null,i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-1",className:"evenRing",d:"M342.3,140.4l-19.2,46.2c21.4,10.1,38.8,27.5,48.9,48.9l46.2-19.2C403,182.7,375.9,155.6,342.3,140.4z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-2",className:"evenRing",d:"M422.1,225.6l-46.2,19.2c3.9,10.8,6,22.4,6,34.6s-2.1,23.8-6,34.6l46.2,19.2c6.3-16.7,9.7-34.8,9.7-53.7 C431.8,260.4,428.4,242.3,422.1,225.6z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-4",className:"evenRing",d:"M313.9,375.8c-10.8,3.9-22.4,6-34.6,6c-12.1,0-23.8-2.1-34.6-6l-19.2,46.2c16.7,6.3,34.8,9.8,53.8,9.8 c18.9,0,37-3.4,53.7-9.7L313.9,375.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-7",className:"evenRing",d:"M216.4,140.4c-33.6,15.3-60.7,42.3-76,76l46.2,19.2c10.1-21.4,27.5-38.7,48.9-48.9L216.4,140.4z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-6",className:"evenRing",d:"M136.6,225.6c-6.3,16.7-9.7,34.8-9.7,53.7c0,18.9,3.4,37,9.7,53.7l46.2-19.1c-3.9-10.8-6-22.4-6-34.6 s2.1-23.8,6-34.6L136.6,225.6z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-5",className:"evenRing",d:"M186.6,323.1l-46.2,19.2c15.2,33.6,42.3,60.7,76,76l19.2-46.2C214.1,361.9,196.8,344.5,186.6,323.1z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-3",className:"evenRing",d:"M372,323.1c-10.1,21.4-27.5,38.8-48.9,48.9l19.2,46.2c33.6-15.2,60.7-42.4,76-76L372,323.1z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"1-0",className:"evenRing",d:"M279.3,126.8c-18.9,0-37,3.4-53.7,9.7l19.2,46.2c10.8-3.9,22.4-6,34.6-6c12.1,0,23.8,2.1,34.5,6l19.2-46.2 C316.3,130.3,298.2,126.8,279.3,126.8z"}));case"3":return i.a.createElement("g",null,i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-6",className:"oddRing",d:"M123.9,279.3c0,18.4,3.2,36,9.1,52.4l-46.6,19.3c-8.3-22.3-12.8-46.5-12.8-71.7c0-25.2,4.5-49.4,12.8-71.7 l46.6,19.3C127.1,243.3,123.9,260.9,123.9,279.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-5",className:"oddRing",d:"M212.9,419.8l-19.3,46.6c-44.7-20.5-80.9-56.7-101.4-101.4l46.7-19.3C154.2,378.2,180.4,404.5,212.9,419.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-7",className:"oddRing",d:"M212.9,138.8c-32.5,15.4-58.7,41.6-74.1,74.1l-46.7-19.3c20.5-44.8,56.7-80.9,101.4-101.4L212.9,138.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-0",className:"oddRing",d:"M351,86.3L331.7,133c-16.4-5.9-34-9.1-52.4-9.1c-18.4,0-36,3.2-52.4,9.1l-19.3-46.6 c22.3-8.3,46.5-12.9,71.7-12.9C304.5,73.5,328.7,78,351,86.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-4",className:"oddRing",d:"M351.1,472.3c-22.3,8.3-46.5,12.8-71.7,12.8c-25.3,0-49.4-4.5-71.8-12.9l19.3-46.6c16.4,5.9,34.1,9.1,52.5,9.1 c18.4,0,36-3.2,52.4-9.1L351.1,472.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-3",className:"oddRing",d:"M466.5,365.1C446,409.8,409.8,446,365,466.5l-19.3-46.7c32.5-15.4,58.7-41.6,74.1-74.1L466.5,365.1z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-1",className:"oddRing",d:"M466.5,193.6l-46.7,19.3c-15.4-32.5-41.7-58.8-74.2-74.1L365,92.1C409.8,112.7,445.9,148.8,466.5,193.6z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"2-2",className:"oddRing",d:"M485.1,279.3c0,25.2-4.5,49.4-12.9,71.7l-46.6-19.3c5.9-16.4,9.1-34,9.1-52.4c0-18.4-3.2-36-9.1-52.4l46.6-19.3 C480.6,229.9,485.1,254.1,485.1,279.3z"}));case"4":return i.a.createElement("g",null,i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-6",className:"evenRing",d:"M70.3,279.3c0,24.7,4.3,48.5,12.2,70.5l-62.7,26c-11.2-30-17.3-62.5-17.3-96.5s6.1-66.4,17.3-96.5l62.7,26 C74.6,230.9,70.3,254.6,70.3,279.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-5",className:"evenRing",d:"M190,468.3l-26,62.7c-60.2-27.6-108.8-76.2-136.4-136.4l62.8-26C111,412.3,146.3,447.7,190,468.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-7",className:"evenRing",d:"M190,90.3c-43.7,20.7-79,56-99.7,99.7l-62.8-26C55.2,103.8,103.8,55.2,164,27.6L190,90.3z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-0",className:"evenRing",d:"M375.7,19.8l-26,62.7c-22-7.9-45.7-12.2-70.4-12.2c-24.7,0-48.5,4.3-70.5,12.2l-26-62.7 c30-11.2,62.5-17.3,96.5-17.3C313.2,2.5,345.7,8.6,375.7,19.8z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-4",className:"evenRing",d:"M375.8,538.9c-30,11.2-62.5,17.3-96.5,17.3c-34,0-66.5-6.1-96.6-17.3l26-62.7c22.1,7.9,45.8,12.2,70.6,12.2 c24.7,0,48.5-4.3,70.5-12.2L375.8,538.9z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-3",className:"evenRing",d:"M531.1,394.7c-27.6,60.2-76.2,108.8-136.4,136.4l-26-62.8c43.7-20.6,79-56,99.7-99.7L531.1,394.7z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-1",className:"evenRing",d:"M531.1,164l-62.8,26c-20.7-43.7-56-79.1-99.7-99.7l26-62.7C454.8,55.2,503.4,103.8,531.1,164z"}),i.a.createElement("path",{onClick:function(e){t.props.onStepClicked(e.target.id)},id:"3-2",className:"evenRing",d:"M556.2,279.3c0,33.9-6.1,66.4-17.3,96.5l-62.7-26c7.9-22,12.2-45.7,12.2-70.5c0-24.7-4.3-48.5-12.2-70.5 l62.7-26C550.1,212.9,556.2,245.4,556.2,279.3z"}));default:return!1}}},{key:"render",value:function(){var e=this,t=this.getRing(this.props.channel),a="1"===this.props.channel||"3"===this.props.channel?"oddRing":"evenRing",n=i.a.Children.map(t.props.children,(function(t){return i.a.cloneElement(t,{className:t.props.id==="".concat(e.props.channel-1,"-").concat(e.props.step)&&e.props.isRunning?"".concat(a," stepOn"):a})}));return i.a.createElement("g",null,n)}},{key:"componentDidMount",value:function(){this.highlightSelectedSteps()}},{key:"componentDidUpdate",value:function(){this.highlightSelectedSteps()}},{key:"highlightSelectedSteps",value:function(){var e=this;this.props.onsets.forEach((function(t,a){var n="".concat(e.props.channel-1,"-").concat(a),i=document.getElementById(n);t?i.classList.add("stepActive"):i.classList.remove("stepActive")}))}}]),t}(n.Component)),S=a(19),y=a.n(S),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).initNoteMatrix=a.initNoteMatrix.bind(Object(d.a)(a)),a.handleStepClicked=a.handleStepClicked.bind(Object(d.a)(a)),a.handleNoteChange=a.handleNoteChange.bind(Object(d.a)(a)),a.handleOnsetChange=a.handleOnsetChange.bind(Object(d.a)(a)),a.handleOffsetChange=a.handleOffsetChange.bind(Object(d.a)(a)),a.rotate=a.rotate.bind(Object(d.a)(a)),a.onsetSteppers=[null,null,null,null],a.defaultState={notes:a.initNoteMatrix(),tonesForTrack:["C","C","C","C"],offsets:[0,0,0,0]},a.state={notes:a.initNoteMatrix(),tonesForTrack:["C","C","C","C"],offsets:[0,0,0,0]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=sessionStorage.getItem("EuclidSequencer");(e=JSON.parse(e))!==this.defaultState&&this.setState(e)}},{key:"componentWillUnmount",value:function(){if(this.state!==this.defaultState){var e=JSON.stringify(this.state);sessionStorage.setItem("EuclidSequencer",e)}}},{key:"initNoteMatrix",value:function(){for(var e=[[],[],[],[]],t=0;t<4;++t)for(var a=0;a<this.props.steps;++a)e[t][a]=null;return e}},{key:"handleStepClicked",value:function(e){var t=e.split("-"),a=this.state.notes.slice();a[t[0]][t[1]]?(a[t[0]][t[1]]=null,this.onsetSteppers[t[0]]&&this.onsetSteppers[t[0]].leftClicked(null)):(a[t[0]][t[1]]=this.state.tonesForTrack[t[0]],this.onsetSteppers[t[0]]&&this.onsetSteppers[t[0]].rightClicked(null)),this.setState({notes:a}),this.props.onNewSequence(a)}},{key:"handleNoteChange",value:function(e,t){var a=this.state.tonesForTrack.slice();a[e]=t;var n=this.state.notes.slice();n[e].forEach((function(a,i){a&&(n[e][i]=t)})),this.setState({tonesForTrack:a,notes:n}),this.props.onNewSequence(n)}},{key:"handleOnsetChange",value:function(e,t){var a=y.a.getPattern(t,this.props.steps);a=this.rotate(a,this.state.offsets[e]);var n=this.state.notes.slice(),i=this.state.tonesForTrack[e];a.forEach((function(t,a){n[e][a]=1===t?i:null})),this.setState({notes:n}),this.props.onNewSequence(n)}},{key:"handleOffsetChange",value:function(e,t){var a=this.state.offsets.slice();a[e]=t;var n=this.state.notes.slice();n[e]=this.rotate(n[e],t),this.setState({notes:n,offsets:a}),this.props.onNewSequence(n)}},{key:"rotate",value:function(e,t){var a=e.length;return e.slice(a-t).concat(e.slice(0,a-t))}},{key:"render",value:function(){var e=this,t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=this.state.notes[0]?this.state.notes[0].filter(Boolean).length:0,n=this.state.notes[1]?this.state.notes[1].filter(Boolean).length:0,s=this.state.notes[2]?this.state.notes[2].filter(Boolean).length:0,c=this.state.notes[3]?this.state.notes[3].filter(Boolean).length:0,o=t[t.indexOf(this.state.tonesForTrack[0])],l=t[t.indexOf(this.state.tonesForTrack[1])],r=t[t.indexOf(this.state.tonesForTrack[2])],h=t[t.indexOf(this.state.tonesForTrack[3])],d=this.state.offsets[0],u=this.state.offsets[1],p=this.state.offsets[2],f=this.state.offsets[3];return i.a.createElement("div",{className:"Euclid"},i.a.createElement("div",{className:"ring"},i.a.createElement("svg",{id:"ring_svg",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"558.7px",height:"558.7px",viewBox:"0 0 558.7 558.7",xmlSpace:"preserve"},i.a.createElement(b,{isRunning:this.props.isRunning,channel:"1",onsets:this.state.notes[0],step:this.props.step,onStepClicked:function(t){e.handleStepClicked(t)}}),i.a.createElement(b,{isRunning:this.props.isRunning,channel:"2",onsets:this.state.notes[1],step:this.props.step,onStepClicked:function(t){e.handleStepClicked(t)}}),i.a.createElement(b,{isRunning:this.props.isRunning,channel:"3",onsets:this.state.notes[2],step:this.props.step,onStepClicked:function(t){e.handleStepClicked(t)}}),i.a.createElement(b,{isRunning:this.props.isRunning,channel:"4",onsets:this.state.notes[3],step:this.props.step,onStepClicked:function(t){e.handleStepClicked(t)}}))),i.a.createElement("div",{className:"divider"},i.a.createElement("div",{className:"track"},"Track"),i.a.createElement("div",null,"Note"),i.a.createElement("div",null,"Onsets"),i.a.createElement("div",null,"Offset"),i.a.createElement("div",{className:"track"},"1"),i.a.createElement(v,{default:o,items:t,onChange:function(t){e.handleNoteChange(0,t)}}),i.a.createElement(v,{ref:function(t){e.onsetSteppers[0]=t},default:a,min:0,max:8,onChange:function(t){e.handleOnsetChange(0,t)}}),i.a.createElement(v,{default:d,min:0,max:7,onChange:function(t){e.handleOffsetChange(0,t)}}),i.a.createElement("div",{className:"track"},"2"),i.a.createElement(v,{default:l,items:t,onChange:function(t){e.handleNoteChange(1,t)}}),i.a.createElement(v,{ref:function(t){e.onsetSteppers[1]=t},default:n,min:0,max:8,onChange:function(t){e.handleOnsetChange(1,t)}}),i.a.createElement(v,{default:u,min:0,max:7,onChange:function(t){e.handleOffsetChange(1,t)}}),i.a.createElement("div",{className:"track"},"3"),i.a.createElement(v,{default:r,items:t,onChange:function(t){e.handleNoteChange(2,t)}}),i.a.createElement(v,{ref:function(t){e.onsetSteppers[2]=t},default:s,min:0,max:8,onChange:function(t){e.handleOnsetChange(2,t)}}),i.a.createElement(v,{default:p,min:0,max:7,onChange:function(t){e.handleOffsetChange(2,t)}}),i.a.createElement("div",{className:"track"},"4"),i.a.createElement(v,{default:h,items:t,onChange:function(t){e.handleNoteChange(3,t)}}),i.a.createElement(v,{ref:function(t){e.onsetSteppers[3]=t},default:c,min:0,max:8,onChange:function(t){e.handleOnsetChange(3,t)}}),i.a.createElement(v,{default:f,min:0,max:7,onChange:function(t){e.handleOffsetChange(3,t)}})))}}]),t}(n.Component),E=a(20),N=a.n(E),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){document.querySelectorAll(".tab").forEach((function(e){e.classList.remove("tab_selected")}));var t=e.target.parentElement;this.props.onTabSelected(t)}},{key:"render",value:function(){var e=this,t="tab ".concat(this.props.tabClass);return i.a.createElement("div",{className:t},i.a.createElement("a",{href:"#",onClick:function(t){e.handleClick(t)}},this.props.title))}}]),t}(n.Component),x=(a(28),a(29),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={knobId:"volume-".concat(e.id),waveform:a.props.defaultWav,mix:a.props.defaultMix,octave:a.props.defaultOctave},a.saveState=a.saveState.bind(Object(d.a)(a)),a.handleWaveChanged=a.handleWaveChanged.bind(Object(d.a)(a)),a.handleMixChange=a.handleMixChange.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;f()("#".concat(this.state.knobId)).knob({change:function(t){e.handleMixChange(t,!1)},release:function(t){e.handleMixChange(t,!0)}});var t=JSON.parse(sessionStorage.getItem(this.props.id));t&&this.setState(t)}},{key:"componentDidUpdate",value:function(){f()("#".concat(this.state.knobId)).trigger("blur")}},{key:"componentWillUnmount",value:function(){this.saveState()}},{key:"saveState",value:function(){var e=JSON.stringify(this.state);sessionStorage.setItem(this.props.id,e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Oscillator"},i.a.createElement("div",{className:"ttl"},i.a.createElement("h3",{className:"panel_title"},this.props.id)),i.a.createElement("div",{className:"wav"},i.a.createElement("p",null,"Waveform"),i.a.createElement(v,{items:["\u223f","\u2293","\u22bf","\u2227\u2227"],default:this.state.waveform,onChange:function(t){e.handleWaveChanged(t)}})),i.a.createElement("div",{className:"mix"},i.a.createElement("p",null,"Mix"),i.a.createElement("input",{type:"text",value:this.state.mix,id:this.state.knobId,className:"knob","data-width":"70","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-max":"15","data-angleOffset":"180"})),i.a.createElement("div",{className:"oct"},i.a.createElement("p",null,"Octave"),i.a.createElement(v,{min:0,max:6,default:this.state.octave,onChange:function(t){e.handleOctaveChanged(t)}})))}},{key:"handleWaveChanged",value:function(e){var t=this,a="sine";switch(e){case"\u223f":a="sine";break;case"\u2293":a="square";break;case"\u22bf":a="triangle";break;case"\u2227\u2227":a="sawtooth"}this.setState({waveform:e},(function(){t.saveState()})),this.props.onWaveformChanged(a)}},{key:"handleMixChange",value:function(e,t){var a=this,n=e/100;this.setState({mix:parseInt(e)},(function(){a.saveState()})),this.props.onMixChanged(n,t)}},{key:"handleOctaveChanged",value:function(e){var t=this;this.setState({octave:e},(function(){t.saveState()})),this.props.onOctaveChanged(e)}}]),t}(n.Component)),j=(a(15),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={peakKnobId:"peak-lpf-".concat(a.props.id),freqKnobId:"freq-lpf-".concat(a.props.id),id:e.id,frequency:8e3,peak:1},a.handleFreqChanged=a.handleFreqChanged.bind(Object(d.a)(a)),a.handlePeakChanged=a.handlePeakChanged.bind(Object(d.a)(a)),a.saveState=a.saveState.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;f()("#"+this.state.peakKnobId).knob({change:function(t){e.handlePeakChanged(t,!1)},release:function(t){e.handlePeakChanged(t,!0)}}),f()("#"+this.state.freqKnobId).knob({change:function(t){e.handleFreqChanged(t,!1)},release:function(t){e.handleFreqChanged(t,!0)}});var t=JSON.parse(sessionStorage.getItem(this.props.id));t&&this.setState(t)}},{key:"componentDidUpdate",value:function(){f()("#"+this.state.freqKnobId).trigger("blur"),f()("#"+this.state.peakKnobId).trigger("blur")}},{key:"componentWillUnmount",value:function(){this.saveState()}},{key:"saveState",value:function(){var e=JSON.stringify(this.state);sessionStorage.setItem(this.props.id,e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Filter"},i.a.createElement("div",{className:"ttl"},i.a.createElement("h3",{className:"panel_title"},this.state.id)),i.a.createElement("div",{className:"freq"},i.a.createElement("p",null,"Freq"),i.a.createElement("input",{type:"text",value:this.state.frequency,step:"1",id:this.state.freqKnobId,className:"knob","data-width":"70","data-max":"8000","data-min":"0","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})),i.a.createElement("div",{className:"peak"},i.a.createElement("p",null,"Peak"),i.a.createElement("input",{type:"text",value:this.state.peak,id:this.state.peakKnobId,className:"knob","data-width":"50","data-max":"25","data-height":"50","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})))}},{key:"handleFreqChanged",value:function(e,t){this.setState({frequency:e}),this.props.onFreqChanged(e,t)}},{key:"handlePeakChanged",value:function(e,t){this.setState({peak:e}),this.props.onPeakChanged(e,t)}}]),t}(n.Component)),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={peakKnobId:"peak-hpf-".concat(a.props.id),freqKnobId:"freq-hpf-".concat(a.props.id),id:e.id,frequency:0,peak:1},a.handleFreqChanged=a.handleFreqChanged.bind(Object(d.a)(a)),a.handlePeakChanged=a.handlePeakChanged.bind(Object(d.a)(a)),a.saveState=a.saveState.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;f()("#"+this.state.peakKnobId).knob({change:function(t){e.handlePeakChanged(t,!1)},release:function(t){e.handlePeakChanged(t,!0)}}),f()("#"+this.state.freqKnobId).knob({change:function(t){e.handleFreqChanged(t,!1)},release:function(t){e.handleFreqChanged(t,!0)}});var t=JSON.parse(sessionStorage.getItem(this.props.id));t&&this.setState(t)}},{key:"componentDidUpdate",value:function(){f()("#"+this.state.freqKnobId).trigger("blur"),f()("#"+this.state.peakKnobId).trigger("blur")}},{key:"componentWillUnmount",value:function(){this.saveState()}},{key:"saveState",value:function(){var e=JSON.stringify(this.state);sessionStorage.setItem(this.props.id,e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"Filter"},i.a.createElement("div",{className:"ttl"},i.a.createElement("h3",{className:"panel_title"},this.state.id)),i.a.createElement("div",{className:"freq"},i.a.createElement("p",null,"Freq"),i.a.createElement("input",{type:"text",value:this.state.frequency,step:"1",id:this.state.freqKnobId,className:"knob","data-width":"70","data-max":"200","data-min":"0","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})),i.a.createElement("div",{className:"peak"},i.a.createElement("p",null,"Peak"),i.a.createElement("input",{type:"text",value:this.state.peak,step:"1",id:this.state.peakKnobId,className:"knob","data-width":"50","data-max":"25","data-height":"50","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})))}},{key:"handleFreqChanged",value:function(e,t){this.setState({frequency:e}),this.props.onFreqChanged(e,t)}},{key:"handlePeakChanged",value:function(e,t){this.setState({peak:e}),this.props.onPeakChanged(e,t)}}]),t}(n.Component),w=(a(30),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).state={id:e.id,attack:10,decay:25,sustain:20,release:10},a.handleAttackChanged=a.handleAttackChanged.bind(Object(d.a)(a)),a.handleDecayChanged=a.handleDecayChanged.bind(Object(d.a)(a)),a.handleReleaseChanged=a.handleReleaseChanged.bind(Object(d.a)(a)),a.handleSustainChanged=a.handleSustainChanged.bind(Object(d.a)(a)),a.saveState=a.saveState.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;f()("#attack").knob({change:function(t){e.handleAttackChanged(t,!1)},release:function(t){e.handleAttackChanged(t,!0)}}),f()("#decay").knob({change:function(t){e.handleDecayChanged(t,!1)},release:function(t){e.handleDecayChanged(t,!0)}}),f()("#sustain").knob({change:function(t){e.handleSustainChanged(t,!1)},release:function(t){e.handleSustainChanged(t,!0)}}),f()("#release").knob({change:function(t){e.handleReleaseChanged(t,!1)},release:function(t){e.handleReleaseChanged(t,!0)}});var t=JSON.parse(sessionStorage.getItem("ADSR"));t&&this.setState(t)}},{key:"componentDidUpdate",value:function(){f()("#attack").trigger("blur"),f()("#decay").trigger("blur"),f()("#sustain").trigger("blur"),f()("#release").trigger("blur")}},{key:"componentWillUnmount",value:function(){this.saveState()}},{key:"saveState",value:function(){var e=JSON.stringify(this.state);sessionStorage.setItem("ADSR",e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"ADSR"},i.a.createElement("div",{className:"attack"},i.a.createElement("h3",{className:"panel_title"},"A"),i.a.createElement("input",{type:"text",value:this.state.attack,id:"attack",className:"knob","data-width":"70","data-max":"100","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})),i.a.createElement("div",{className:"decay"},i.a.createElement("h3",{className:"panel_title"},"D"),i.a.createElement("input",{type:"text",value:this.state.decay,id:"decay",className:"knob","data-width":"70","data-max":"100","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})),i.a.createElement("div",{className:"sustain"},i.a.createElement("h3",{className:"panel_title"},"S"),i.a.createElement("input",{type:"text",value:this.state.sustain,id:"sustain",className:"knob","data-width":"70","data-max":"100","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})),i.a.createElement("div",{className:"release"},i.a.createElement("h3",{className:"panel_title"},"R"),i.a.createElement("input",{type:"text",value:this.state.release,id:"release",className:"knob","data-width":"70","data-max":"100","data-height":"70","data-fgColor":"#c20097","data-bgColor":"#044f4d","data-displayInput":"false","data-angleOffset":"180"})))}},{key:"handleAttackChanged",value:function(e,t){this.setState({attack:e}),this.props.onAttackChanged(e/100,t)}},{key:"handleDecayChanged",value:function(e,t){this.setState({decay:e}),this.props.onDecayChanged(e/100,t)}},{key:"handleSustainChanged",value:function(e,t){this.setState({sustain:e}),this.props.onSustainChanged(e/100,t)}},{key:"handleReleaseChanged",value:function(e,t){this.setState({release:e}),this.props.onReleaseChanged(e/100,t)}}]),t}(n.Component)),R=function(e){function t(e){return Object(o.a)(this,t),Object(r.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ControlPanel"},i.a.createElement("div",{className:"osc1"},i.a.createElement(x,{id:"OSC-1",defaultWav:"\u223f",defaultMix:10,defaultOctave:2,onWaveformChanged:function(t){e.props.onWaveformChanged1(t)},onMixChanged:function(t,a){e.props.onMixChanged1(t,a)},onOctaveChanged:function(t){e.props.onOctaveChanged1(t)}})),i.a.createElement("div",{className:"osc2"},i.a.createElement(x,{id:"OSC-2",defaultWav:"\u22bf",defaultMix:10,defaultOctave:4,onWaveformChanged:function(t){e.props.onWaveformChanged2(t)},onMixChanged:function(t,a){e.props.onMixChanged2(t,a)},onOctaveChanged:function(t){e.props.onOctaveChanged2(t)}})),i.a.createElement("div",{className:"lpf"},i.a.createElement(j,{id:"LPF",onFreqChanged:function(t){return e.props.onFreqChangedL(t)},onPeakChanged:function(t){return e.props.onPeakChangedL(t)}})),i.a.createElement("div",{className:"hpf"},i.a.createElement(q,{id:"HPF",onFreqChanged:function(t){return e.props.onFreqChangedH(t)},onPeakChanged:function(t){return e.props.onPeakChangedH(t)}})),i.a.createElement("div",{className:"adsr"},i.a.createElement(w,{id:"ADSR",onAttackChanged:function(t,a){e.props.onAttackChanged(t,a)},onDecayChanged:function(t,a){e.props.onDecayChanged(t,a)},onSustainChanged:function(t,a){e.props.onSustainChanged(t,a)},onReleaseChanged:function(t,a){e.props.onReleaseChanged(t,a)}})))}}]),t}(n.Component),I=a(21),M=a.n(I),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(h.a)(t).call(this,e))).defaultState={scheduleAhead:0,isRunning:!1,step:0,bpm:180,sequence:[[],[],[],[]],osc1:{mix:.1,waveform:"sine",octave:2},osc2:{mix:.1,waveform:"triangle",octave:4},lpf:{type:"lowpass",freq:8e3,peak:1,detune:0},hpf:{type:"highpass",freq:0,peak:1,detune:0},adsr:{attackTime:.1,decayTime:.25,sustainLevel:.2,releaseTime:.1,gateTime:.6,peakLevel:.15,releaseCurve:"exp"},tab:"sequencer"},a.state=Object.assign({},a.defaultState),a.handleTick=a.handleTick.bind(Object(d.a)(a)),a.playStep=a.playStep.bind(Object(d.a)(a)),a.saveState=a.saveState.bind(Object(d.a)(a)),a.getVoicesFor=a.getVoicesFor.bind(Object(d.a)(a)),a.handleTabSelected=a.handleTabSelected.bind(Object(d.a)(a)),a.handleTransportStateChanged=a.handleTransportStateChanged.bind(Object(d.a)(a)),a.initializeAudio=a.initializeAudio.bind(Object(d.a)(a)),a.handleFreqChangedH=a.handleFreqChangedH.bind(Object(d.a)(a)),a.handlePeakChangedH=a.handlePeakChangedH.bind(Object(d.a)(a)),a.makeNote=a.makeNote.bind(Object(d.a)(a)),a.handleAttackChanged=a.handleAttackChanged.bind(Object(d.a)(a)),a.handleDecayChanged=a.handleDecayChanged.bind(Object(d.a)(a)),a.handleSustainChanged=a.handleSustainChanged.bind(Object(d.a)(a)),a.handleReleaseChanged=a.handleReleaseChanged.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.initializeAudio();var t=JSON.parse(sessionStorage.getItem("Synth"));t&&t!==this.defaultState?this.setState(t,(function(){e.handleTabSelected(document.querySelector(".".concat(e.state.tab)),!0)})):document.querySelector(".sequencer").classList.add("tab_selected")}},{key:"initializeAudio",value:function(){var e={latencyHint:"playback",sampleRate:22050};"webkitAudioContext"in window?this.audioContext=new window.webkitAudioContext(e):this.audioContext=new window.AudioContext(e),this.oscGain1=this.audioContext.createGain(),this.oscGain2=this.audioContext.createGain(),this.hpf1=this.audioContext.createBiquadFilter(),this.hpf1.type=this.state.hpf.type,this.hpf1.detune.setValueAtTime(this.state.hpf.detune,this.audioContext.currentTime),this.hpf2=this.audioContext.createBiquadFilter(),this.hpf2.type=this.state.hpf.type,this.hpf2.detune.setValueAtTime(this.state.hpf.detune,this.audioContext.currentTime),this.lpf1=this.audioContext.createBiquadFilter(),this.lpf1.type=this.state.lpf.type,this.lpf1.detune.setValueAtTime(this.state.lpf.detune,this.audioContext.currentTime),this.lpf2=this.audioContext.createBiquadFilter(),this.lpf2.type=this.state.lpf.type,this.lpf2.detune.setValueAtTime(this.state.lpf.detune,this.audioContext.currentTime),this.adsr=new M.a(this.state.adsr),this.hpf1.frequency.setValueAtTime(this.state.hpf.freq,this.audioContext.currentTime),this.hpf1.Q.value=this.state.hpf.peak,this.hpf2.frequency.setValueAtTime(this.state.hpf.freq,this.audioContext.currentTime),this.hpf2.Q.value=this.state.hpf.peak,this.lpf1.frequency.setValueAtTime(this.state.lpf.freq,this.audioContext.currentTime),this.lpf1.Q.value=this.state.lpf.peak,this.lpf2.frequency.setValueAtTime(this.state.lpf.freq,this.audioContext.currentTime),this.lpf2.Q.value=this.state.lpf.peak,this.oscGain1.gain.value=this.state.osc1.mix,this.oscGain2.gain.value=this.state.osc2.mix,this.merger=this.audioContext.createChannelMerger(2),this.oscGain1.connect(this.merger,0,0),this.oscGain2.connect(this.merger,0,0),this.oscGain1.connect(this.merger,0,1),this.oscGain2.connect(this.merger,0,1),this.merger.connect(this.audioContext.destination)}},{key:"componentWillUnmount",value:function(){this.saveState(this.state)}},{key:"saveState",value:function(e){if(e!==this.defaultState){var t=JSON.stringify(e);sessionStorage.setItem("Synth",t)}}},{key:"getVoicesFor",value:function(e,t){var a=this.state.sequence[e-1][t];if(a){var n=this.audioContext.createOscillator();n.type=this.state.osc1.waveform,n.connect(this.hpf1),this.hpf1.connect(this.lpf1),this.lpf1.connect(this.oscGain1);var i=this.audioContext.createOscillator();i.type=this.state.osc2.waveform,i.connect(this.hpf2),this.hpf2.connect(this.lpf2),this.lpf2.connect(this.oscGain2);var s=k.textNoteToFrequency(a);return n.frequency.setValueAtTime(k.shiftToOctave(s,this.state.osc1.octave),this.audioContext.currentTime),i.frequency.setValueAtTime(k.shiftToOctave(s,this.state.osc2.octave),this.audioContext.currentTime),[n,i]}return null}},{key:"makeNote",value:function(e,t){if(e){var a=C.bpmToS(this.state.bpm),n=this.adsr.clone(),i=this.adsr.clone();n.peakLevel=this.state.osc1.mix,n.gateTime=a,i.peakLevel=this.state.osc2.mix,i.gateTime=a,n.applyTo(this.oscGain1.gain,t),i.applyTo(this.oscGain2.gain,t),e[0].start(t),e[1].start(t),this.oscGain1.gain.cancelScheduledValues(t),this.oscGain2.gain.cancelScheduledValues(t),n.applyTo(this.oscGain1.gain,t),i.applyTo(this.oscGain2.gain,t),e[0].stop(t+n.duration+a),e[1].stop(t+i.duration+a)}}},{key:"playStep",value:function(e){try{var t=this.audioContext.currentTime,a=(C.bpmToS(this.state.bpm),this.getVoicesFor(1,e)),n=this.getVoicesFor(2,e),i=this.getVoicesFor(3,e),s=this.getVoicesFor(4,e);this.makeNote(a,t),this.makeNote(n,t),this.makeNote(i,t),this.makeNote(s,t)}catch(c){console.log(c)}}},{key:"handleNewSequence",value:function(e){var t=Object.assign({},this.state);t.sequence=e,this.setState(t)}},{key:"handleTick",value:function(e){var t=Object.assign({},this.state);t.step=e,this.setState(t,(function(){})),this.playStep(e)}},{key:"handleWaveform1Changed",value:function(e){var t=Object.assign({},this.state);t.osc1.waveform=e,this.setState(t)}},{key:"handleMix1Changed",value:function(e,t){if(this.oscGain1.gain.value=e,t){var a=Object.assign({},this.state);a.osc1.mix=e,this.setState(a)}}},{key:"handleOctave1Changed",value:function(e){var t=Object.assign({},this.state);t.osc1.octave=e,this.setState(t)}},{key:"handleWaveform2Changed",value:function(e){var t=Object.assign({},this.state);t.osc2.waveform=e,this.setState(t)}},{key:"handleMix2Changed",value:function(e,t){if(this.oscGain2.gain.value=e,t){var a=Object.assign({},this.state);a.osc2.mix=e,this.setState(a)}}},{key:"handleOctave2Changed",value:function(e){var t=Object.assign({},this.state);t.osc2.octave=e,this.setState(t)}},{key:"handleFreqChangedH",value:function(e,t){if(this.hpf1.frequency.setValueAtTime(e,this.audioContext.currentTime),this.hpf2.frequency.setValueAtTime(e,this.audioContext.currentTime),t){var a=Object.assign({},this.state);a.hpf.freq=e,this.setState(a)}}},{key:"handlePeakChangedH",value:function(e,t){if(this.hpf1.Q.setValueAtTime(e,this.audioContext.currentTime),this.hpf2.Q.setValueAtTime(e,this.audioContext.currentTime),t){var a=Object.assign({},this.state);a.hpf.peak=e,this.setState(a)}}},{key:"handleFreqChangedL",value:function(e,t){if(this.lpf1.frequency.setValueAtTime(e,this.audioContext.currentTime),this.lpf2.frequency.setValueAtTime(e,this.audioContext.currentTime),t){var a=Object.assign({},this.state);a.lpf.freq=e,this.setState(a)}}},{key:"handlePeakChangedL",value:function(e,t){if(this.lpf1.Q.setValueAtTime(e,this.audioContext.currentTime),this.lpf2.Q.setValueAtTime(e,this.audioContext.currentTime),t){var a=Object.assign({},this.state);a.lpf.peak=e,this.setState(a)}}},{key:"handlePaused",value:function(){}},{key:"handleTabSelected",value:function(e,t){if(e.classList.add("tab_selected"),!t){var a=Object.assign({},this.state);a.tab=e.classList[1],this.setState(a),this.saveState(a)}}},{key:"handleTransportStateChanged",value:function(e){e||this.setState({step:0}),this.setState({isRunning:e})}},{key:"handleAttackChanged",value:function(e,t){if(this.adsr.attackTime=e,t){var a=Object.assign({},this.state);a.adsr.attackTime=e,this.setState(a)}}},{key:"handleDecayChanged",value:function(e,t){if(this.adsr.decayTime=e,t){var a=Object.assign({},this.state);a.adsr.decayTime=e,this.setState(a)}}},{key:"handleSustainChanged",value:function(e,t){if(this.adsr.sustainTime=e,t){var a=Object.assign({},this.state);a.adsr.sustainTime=e,this.setState(a)}}},{key:"handleReleaseChanged",value:function(e,t){if(this.adsr.releaseTime=e,t){var a=Object.assign({},this.state);a.adsr.releaseTime=e,this.setState(a)}}},{key:"getControlsTab",value:function(){var e=this;return i.a.createElement("div",{className:"content"},i.a.createElement(R,{onWaveformChanged1:function(t){e.handleWaveform1Changed(t)},onMixChanged1:function(t,a){e.handleMix1Changed(t,a)},onOctaveChanged1:function(t){e.handleOctave1Changed(t)},onWaveformChanged2:function(t){e.handleWaveform2Changed(t)},onMixChanged2:function(t,a){e.handleMix2Changed(t,a)},onOctaveChanged2:function(t){e.handleOctave2Changed(t)},onFreqChangedH:function(t,a){return e.handleFreqChangedH(t,a)},onPeakChangedH:function(t,a){return e.handlePeakChangedH(t,a)},onFreqChangedL:function(t,a){return e.handleFreqChangedL(t,a)},onPeakChangedL:function(t,a){return e.handlePeakChangedL(t,a)},onAttackChanged:function(t,a){e.handleAttackChanged(t,a)},onDecayChanged:function(t,a){e.handleDecayChanged(t,a)},onSustainChanged:function(t,a){e.handleSustainChanged(t,a)},onReleaseChanged:function(t,a){e.handleReleaseChanged(t,a)}}))}},{key:"getSequencerTab",value:function(){var e=this;return i.a.createElement("div",{className:"content"},i.a.createElement(O,{initialSequence:this.state.sequence,step:this.state.step,steps:"8",isRunning:this.state.isRunning,onNewSequence:function(t){e.handleNewSequence(t)}}))}},{key:"render",value:function(){var e,t=this;switch(this.state.tab){case"sequencer":e=this.getSequencerTab();break;case"controls":e=this.getControlsTab();break;default:e=this.getSequencerTab()}return i.a.createElement("div",{className:"wrapper"},i.a.createElement(C,{onPaused:function(){t.handlePaused()},steps:8,onTick:function(e){t.handleTick(e)},onRunningChanged:function(e){t.handleTransportStateChanged(e)}}),i.a.createElement("div",{className:"branding"},i.a.createElement("img",{src:N.a})),i.a.createElement(T,{tabClass:"sequencer",title:"Sequencer",onTabSelected:function(e){t.handleTabSelected(e)}}),i.a.createElement(T,{tabClass:"controls",title:"Controls",onTabSelected:function(e){t.handleTabSelected(e)}}),e)}}]),t}(n.Component),A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(i.a.createElement(F,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/lovemhz",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/lovemhz","/service-worker.js");A?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):L(e)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.36b8ae95.chunk.js.map